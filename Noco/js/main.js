!function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(void 0===this||null===this)throw new TypeError;var n=Object(this),i=n.length>>>0,r=0,o;if("function"!=typeof t)throw new TypeError;if(0==i&&1==arguments.length)throw new TypeError;if(arguments.length>=2)o=arguments[1];else for(;;){if(r in n){o=n[r++];break}if(++r>=i)throw new TypeError}for(;i>r;)r in n&&(o=t.call(e,o,n[r],r,n)),r++;return o})}();var Zepto=function(){function e(e){return null==e?String(e):X[H.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function r(t){return"object"==e(t)}function o(e){return r(e)&&!n(e)&&e.__proto__==Object.prototype}function a(e){return e instanceof Array}function s(e){return"number"==typeof e.length}function c(e){return C.call(e,function(e){return null!=e})}function u(e){return e.length>0?$.fn.concat.apply([],e):e}function l(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function d(e){return e in P?P[e]:P[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function p(e,t){return"number"!=typeof t||A[l(e)]?t:t+"px"}function f(e){var t,n;return M[e]||(t=I.createElement(e),I.body.appendChild(t),n=O(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),M[e]=n),M[e]}function h(e){return"children"in e?T.call(e.children):$.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function m(e,t,n){for(N in t)n&&(o(t[N])||a(t[N]))?(o(t[N])&&!o(e[N])&&(e[N]={}),a(t[N])&&!a(e[N])&&(e[N]=[]),m(e[N],t[N],n)):t[N]!==_&&(e[N]=t[N])}function g(e,t){return t===_?$(e):$(e).filter(t)}function v(e,n,i,r){return t(n)?n.call(e,i,r):n}function w(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function y(e,t){var n=e.className,i=n&&n.baseVal!==_;return t===_?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function b(e){var t;try{return e?"true"==e||("false"==e?!1:"null"==e?null:isNaN(t=Number(e))?/^[\[\{]/.test(e)?$.parseJSON(e):e:t):e}catch(n){return e}}function x(e,t){t(e);for(var n in e.childNodes)x(e.childNodes[n],t)}var _,N,$,S,E=[],T=E.slice,C=E.filter,I=window.document,M={},P={},O=I.defaultView.getComputedStyle,A={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},D=/^\s*<(\w+|!)[^>]*>/,k=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,L=["val","css","html","text","data","width","height","offset"],R=["after","prepend","before","append"],j=I.createElement("table"),U=I.createElement("tr"),G={tr:I.createElement("tbody"),tbody:j,thead:j,tfoot:j,td:U,th:U,"*":I.createElement("div")},B=/complete|loaded|interactive/,q=/^\.([\w-]+)$/,W=/^#([\w-]*)$/,z=/^[\w-]+$/,X={},H=X.toString,V={},Y,Z,J=I.createElement("div");return V.matches=function(e,t){if(!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,o=!r;return o&&(r=J).appendChild(e),i=~V.qsa(r,t).indexOf(e),o&&J.removeChild(e),i},Y=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},Z=function(e){return C.call(e,function(t,n){return e.indexOf(t)==n})},V.fragment=function(e,t,n){e.replace&&(e=e.replace(k,"<$1></$2>")),t===_&&(t=D.test(e)&&RegExp.$1),t in G||(t="*");var i,r,a=G[t];return a.innerHTML=""+e,r=$.each(T.call(a.childNodes),function(){a.removeChild(this)}),o(n)&&(i=$(r),$.each(n,function(e,t){L.indexOf(e)>-1?i[e](t):i.attr(e,t)})),r},V.Z=function(e,t){return e=e||[],e.__proto__=$.fn,e.selector=t||"",e},V.isZ=function(e){return e instanceof V.Z},V.init=function(e,n){if(e){if(t(e))return $(I).ready(e);if(V.isZ(e))return e;var i;if(a(e))i=c(e);else if(r(e))i=[o(e)?$.extend({},e):e],e=null;else if(D.test(e))i=V.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==_)return $(n).find(e);i=V.qsa(I,e)}return V.Z(i,e)}return V.Z()},$=function(e,t){return V.init(e,t)},$.extend=function(e){var t,n=T.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){m(e,n,t)}),e},V.qsa=function(e,t){var n;return i(e)&&W.test(t)?(n=e.getElementById(RegExp.$1))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:T.call(q.test(t)?e.getElementsByClassName(RegExp.$1):z.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},$.contains=function(e,t){return e!==t&&e.contains(t)},$.type=e,$.isFunction=t,$.isWindow=n,$.isArray=a,$.isPlainObject=o,$.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},$.inArray=function(e,t,n){return E.indexOf.call(t,e,n)},$.camelCase=Y,$.trim=function(e){return e.trim()},$.uuid=0,$.support={},$.expr={},$.map=function(e,t){var n,i=[],r,o;if(s(e))for(r=0;r<e.length;r++)n=t(e[r],r),null!=n&&i.push(n);else for(o in e)n=t(e[o],o),null!=n&&i.push(n);return u(i)},$.each=function(e,t){var n,i;if(s(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},$.grep=function(e,t){return C.call(e,t)},window.JSON&&($.parseJSON=JSON.parse),$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){X["[object "+t+"]"]=t.toLowerCase()}),$.fn={forEach:E.forEach,reduce:E.reduce,push:E.push,sort:E.sort,indexOf:E.indexOf,concat:E.concat,map:function(e){return $($.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return $(T.apply(this,arguments))},ready:function(e){return B.test(I.readyState)?e($):I.addEventListener("DOMContentLoaded",function(){e($)},!1),this},get:function(e){return e===_?T.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return E.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):$(C.call(this,function(t){return V.matches(t,e)}))},add:function(e,t){return $(Z(this.concat($(e,t))))},is:function(e){return this.length>0&&V.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==_)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):s(e)&&t(e.item)?T.call(e):$(e);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return $(n)},has:function(e){return this.filter(function(){return r(e)?$.contains(this,e):$(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!r(e)?e:$(e)},last:function(){var e=this[this.length-1];return e&&!r(e)?e:$(e)},find:function(e){var t,n=this;return t="object"==typeof e?$(e).filter(function(){var e=this;return E.some.call(n,function(t){return $.contains(t,e)})}):1==this.length?$(V.qsa(this[0],e)):this.map(function(){return V.qsa(this,e)})},closest:function(e,t){var n=this[0],r=!1;for("object"==typeof e&&(r=$(e));n&&!(r?r.indexOf(n)>=0:V.matches(n,e));)n=n!==t&&!i(n)&&n.parentNode;return $(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=$.map(n,function(e){return(e=e.parentNode)&&!i(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return g(t,e)},parent:function(e){return g(Z(this.pluck("parentNode")),e)},children:function(e){return g(this.map(function(){return h(this)}),e)},contents:function(){return this.map(function(){return T.call(this.childNodes)})},siblings:function(e){return g(this.map(function(e,t){return C.call(h(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return $.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==O(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var i=$(e).get(0),r=i.parentNode||this.length>1;return this.each(function(t){$(this).wrapAll(n?e.call(this,t):r?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){$(this[0]).before(e=$(e));for(var t;(t=e.children()).length;)e=t.first();$(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var i=$(this),r=i.contents(),o=n?e.call(this,t):e;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){$(this).replaceWith($(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=$(this);(e===_?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return $(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return $(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return e===_?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;$(this).empty().append(v(this,e,t,n))})},text:function(e){return e===_?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e})},attr:function(e,t){var n;return"string"==typeof e&&t===_?0==this.length||1!==this[0].nodeType?_:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:this.each(function(n){if(1===this.nodeType)if(r(e))for(N in e)w(this,N,e[N]);else w(this,e,v(this,t,n,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&w(this,e)})},prop:function(e,t){return t===_?this[0]&&this[0][e]:this.each(function(n){this[e]=v(this,t,n,this[e])})},data:function(e,t){var n=this.attr("data-"+l(e),t);return null!==n?b(n):_},val:function(e){return e===_?this[0]&&(this[0].multiple?$(this[0]).find("option").filter(function(e){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=v(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var n=$(this),i=v(this,e,t,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(0==this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2&&"string"==typeof t)return this[0]&&(this[0].style[Y(t)]||O(this[0],"").getPropertyValue(t));var i="";if("string"==e(t))n||0===n?i=l(t)+":"+p(t,n):this.each(function(){this.style.removeProperty(l(t))});else for(N in t)t[N]||0===t[N]?i+=l(N)+":"+p(N,t[N])+";":this.each(function(){this.style.removeProperty(l(N))});return this.each(function(){this.style.cssText+=";"+i})},index:function(e){return e?this.indexOf($(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return E.some.call(this,function(e){return this.test(y(e))},d(e))},addClass:function(e){return this.each(function(t){S=[];var n=y(this),i=v(this,e,t,n);i.split(/\s+/g).forEach(function(e){$(this).hasClass(e)||S.push(e)},this),S.length&&y(this,n+(n?" ":"")+S.join(" "))})},removeClass:function(e){return this.each(function(t){return e===_?y(this,""):(S=y(this),v(this,e,t,S).split(/\s+/g).forEach(function(e){S=S.replace(d(e)," ")}),void y(this,S.trim()))})},toggleClass:function(e,t){return this.each(function(n){var i=$(this),r=v(this,e,n,y(this));r.split(/\s+/g).forEach(function(e){(t===_?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=F.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat($(e).css("margin-top"))||0,n.left-=parseFloat($(e).css("margin-left"))||0,i.top+=parseFloat($(t[0]).css("border-top-width"))||0,i.left+=parseFloat($(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||I.body;e&&!F.test(e.nodeName)&&"static"==$(e).css("position");)e=e.offsetParent;return e})}},$.fn.detach=$.fn.remove,["width","height"].forEach(function(e){$.fn[e]=function(t){var r,o=this[0],a=e.replace(/./,function(e){return e[0].toUpperCase()});return t===_?n(o)?o["inner"+a]:i(o)?o.documentElement["offset"+a]:(r=this.offset())&&r[e]:this.each(function(n){o=$(this),o.css(e,v(this,t,n,o[e]()))})}}),R.forEach(function(t,n){var i=n%2;$.fn[t]=function(){var t,r=$.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:V.fragment(n)}),o,a=this.length>1;return r.length<1?this:this.each(function(e,t){o=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null,r.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!o)return $(e).remove();x(o.insertBefore(e,t),function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},$.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return $(e)[t](this),this}}),V.Z.prototype=$.fn,V.uniq=Z,V.deserializeValue=b,$.zepto=V,$}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function($){function e(e){var t=this.os={},n=this.browser={},i=e.match(/WebKit\/([\d.]+)/),r=e.match(/(Android)\s+([\d.]+)/),o=e.match(/(iPad).*OS\s([\d_]+)/),a=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),s=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=s&&e.match(/TouchPad/),u=e.match(/Kindle\/([\d.]+)/),l=e.match(/Silk\/([\d._]+)/),d=e.match(/(BlackBerry).*Version\/([\d.]+)/),p=e.match(/(BB10).*Version\/([\d.]+)/),f=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),h=e.match(/PlayBook/),m=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),g=e.match(/Firefox\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(t.android=!0,t.version=r[2]),a&&(t.ios=t.iphone=!0,t.version=a[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),s&&(t.webos=!0,t.version=s[2]),c&&(t.touchpad=!0),d&&(t.blackberry=!0,t.version=d[2]),p&&(t.bb10=!0,t.version=p[2]),f&&(t.rimtabletos=!0,t.version=f[2]),h&&(n.playbook=!0),u&&(t.kindle=!0,t.version=u[1]),l&&(n.silk=!0,n.version=l[1]),!l&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),m&&(n.chrome=!0,n.version=m[1]),g&&(n.firefox=!0,n.version=g[1]),t.tablet=!!(o||h||r&&!e.match(/Mobile/)||g&&e.match(/Tablet/)),t.phone=!(t.tablet||!(r||a||s||d||p||m&&e.match(/Android/)||m&&e.match(/CriOS\/([\d.]+)/)||g&&e.match(/Mobile/)))}e.call($,navigator.userAgent),$.__detect=e}(Zepto),function($){function e(e){return e._zid||(e._zid=f++)}function t(t,r,o,a){if(r=n(r),r.ns)var s=i(r.ns);return(p[e(t)]||[]).filter(function(t){return!(!t||r.e&&t.e!=r.e||r.ns&&!s.test(t.ns)||o&&e(t.fn)!==e(o)||a&&t.sel!=a)})}function n(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function i(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function r(e,t,n){"string"!=$.type(e)?$.each(e,n):e.split(/\s/).forEach(function(e){n(e,t)})}function o(e,t){return e.del&&("focus"==e.e||"blur"==e.e)||!!t}function a(e){return m[e]||e}function s(t,i,s,c,u,l){var d=e(t),f=p[d]||(p[d]=[]);r(i,s,function(e,i){var r=n(e);r.fn=i,r.sel=c,r.e in m&&(i=function(e){var t=e.relatedTarget;return!t||t!==this&&!$.contains(this,t)?r.fn.apply(this,arguments):void 0}),r.del=u&&u(i,e);var s=r.del||i;r.proxy=function(e){var n=s.apply(t,[e].concat(e.data));return n===!1&&(e.preventDefault(),e.stopPropagation()),n},r.i=f.length,f.push(r),t.addEventListener(a(r.e),r.proxy,o(r,l))})}function c(n,i,s,c,u){var l=e(n);r(i||"",s,function(e,i){t(n,e,i,c).forEach(function(e){delete p[l][e.i],n.removeEventListener(a(e.e),e.proxy,o(e,u))})})}function u(e){var t,n={originalEvent:e};for(t in e)w.test(t)||void 0===e[t]||(n[t]=e[t]);return $.each(y,function(t,i){n[t]=function(){return this[i]=g,e[t].apply(e,arguments)},n[i]=v}),n}function l(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}var d=$.zepto.qsa,p={},f=1,h={},m={mouseenter:"mouseover",mouseleave:"mouseout"};h.click=h.mousedown=h.mouseup=h.mousemove="MouseEvents",$.event={add:s,remove:c},$.proxy=function(t,n){if($.isFunction(t)){var i=function(){return t.apply(n,arguments)};return i._zid=e(t),i}if("string"==typeof n)return $.proxy(t[n],t);throw new TypeError("expected function")},$.fn.bind=function(e,t){return this.each(function(){s(this,e,t)})},$.fn.unbind=function(e,t){return this.each(function(){c(this,e,t)})},$.fn.one=function(e,t){return this.each(function(n,i){s(this,e,t,null,function(e,t){return function(){var n=e.apply(i,arguments);return c(i,t,e),n}})})};var g=function(){return!0},v=function(){return!1},w=/^([A-Z]|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};$.fn.delegate=function(e,t,n){return this.each(function(i,r){s(r,t,n,e,function(t){return function(n){var i,o=$(n.target).closest(e,r).get(0);return o?(i=$.extend(u(n),{currentTarget:o,liveFired:r}),t.apply(o,[i].concat([].slice.call(arguments,1)))):void 0}})})},$.fn.undelegate=function(e,t,n){return this.each(function(){c(this,t,n,e)})},$.fn.live=function(e,t){return $(document.body).delegate(this.selector,e,t),this},$.fn.die=function(e,t){return $(document.body).undelegate(this.selector,e,t),this},$.fn.on=function(e,t,n){return!t||$.isFunction(t)?this.bind(e,t||n):this.delegate(t,e,n)},$.fn.off=function(e,t,n){return!t||$.isFunction(t)?this.unbind(e,t||n):this.undelegate(t,e,n)},$.fn.trigger=function(e,t){return("string"==typeof e||$.isPlainObject(e))&&(e=$.Event(e)),l(e),e.data=t,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(e)})},$.fn.triggerHandler=function(e,n){var i,r;return this.each(function(o,a){i=u("string"==typeof e?$.Event(e):e),i.data=n,i.target=a,$.each(t(a,e.type||e),function(e,t){return r=t.proxy(i),i.isImmediatePropagationStopped()?!1:void 0})}),r},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){$.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){$.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),$.Event=function(e,t){"string"!=typeof e&&(t=e,e=t.type);var n=document.createEvent(h[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n.isDefaultPrevented=function(){return this.defaultPrevented},n}}(Zepto),function($){function e(e,t,n){var i=$.Event(t);return $(e).trigger(i,n),!i.defaultPrevented}function t(t,n,i,r){return t.global?e(n||m,i,r):void 0}function n(e){e.global&&0===$.active++&&t(e,null,"ajaxStart")}function i(e){e.global&&!--$.active&&t(e,null,"ajaxStop")}function r(e,n){var i=n.context;return n.beforeSend.call(i,e,n)===!1||t(n,i,"ajaxBeforeSend",[e,n])===!1?!1:void t(n,i,"ajaxSend",[e,n])}function o(e,n,i){var r=i.context,o="success";i.success.call(r,e,o,n),t(i,r,"ajaxSuccess",[n,i,e]),s(o,n,i)}function a(e,n,i,r){var o=r.context;r.error.call(o,i,n,e),t(r,o,"ajaxError",[i,r,e]),s(n,i,r)}function s(e,n,r){var o=r.context;r.complete.call(o,n,e),t(r,o,"ajaxComplete",[n,r]),i(r)}function c(){}function u(e){return e&&(e=e.split(";",2)[0]),e&&(e==_?"html":e==x?"json":y.test(e)?"script":b.test(e)&&"xml")||"text"}function l(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function d(e){e.processData&&e.data&&"string"!=$.type(e.data)&&(e.data=$.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=l(e.url,e.data))}function p(e,t,n,i){var r=!$.isFunction(t);return{url:e,data:r?t:void 0,success:r?$.isFunction(n)?n:void 0:t,dataType:r?i||n:n}}function f(e,t,n,i){var r,o=$.isArray(t);$.each(t,function(t,a){r=$.type(a),i&&(t=n?i:i+"["+(o?"":t)+"]"),!i&&o?e.add(a.name,a.value):"array"==r||!n&&"object"==r?f(e,a,n,t):e.add(t,a)})}var h=0,m=window.document,g,v,w=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,y=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,x="application/json",_="text/html",N=/^\s*$/;$.active=0,$.ajaxJSONP=function(e){if(!("type"in e))return $.ajax(e);var t="jsonp"+ ++h,n=m.createElement("script"),i=function(){clearTimeout(l),$(n).remove(),delete window[t]},s=function(n){i(),n&&"timeout"!=n||(window[t]=c),a(null,n||"abort",u,e)},u={abort:s},l;return r(u,e)===!1?(s("abort"),!1):(window[t]=function(t){i(),o(t,u,e)},n.onerror=function(){s("error")},n.src=e.url.replace(/=\?/,"="+t),$("head").append(n),e.timeout>0&&(l=setTimeout(function(){s("timeout")},e.timeout)),u)},$.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:x,xml:"application/xml, text/xml",html:_,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(e){var t=$.extend({},e||{});for(g in $.ajaxSettings)void 0===t[g]&&(t[g]=$.ajaxSettings[g]);n(t),t.crossDomain||(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!=window.location.host),t.url||(t.url=window.location.toString()),d(t),t.cache===!1&&(t.url=l(t.url,"_="+Date.now()));var i=t.dataType,s=/=\?/.test(t.url);if("jsonp"==i||s)return s||(t.url=l(t.url,"callback=?")),$.ajaxJSONP(t);var p=t.accepts[i],f={},h=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:window.location.protocol,m=t.xhr(),w;t.crossDomain||(f["X-Requested-With"]="XMLHttpRequest"),p&&(f.Accept=p,p.indexOf(",")>-1&&(p=p.split(",",2)[0]),m.overrideMimeType&&m.overrideMimeType(p)),(t.contentType||t.contentType!==!1&&t.data&&"GET"!=t.type.toUpperCase())&&(f["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),t.headers=$.extend(f,t.headers||{}),m.onreadystatechange=function(){if(4==m.readyState){m.onreadystatechange=c,clearTimeout(w);var e,n=!1;if(m.status>=200&&m.status<300||304==m.status||0==m.status&&"file:"==h){i=i||u(m.getResponseHeader("content-type")),e=m.responseText;try{"script"==i?(1,eval)(e):"xml"==i?e=m.responseXML:"json"==i&&(e=N.test(e)?null:$.parseJSON(e))}catch(r){n=r}n?a(n,"parsererror",m,t):o(e,m,t)}else a(null,m.status?"error":"abort",m,t)}};var y="async"in t?t.async:!0;m.open(t.type,t.url,y);for(v in t.headers)m.setRequestHeader(v,t.headers[v]);return r(m,t)===!1?(m.abort(),!1):(t.timeout>0&&(w=setTimeout(function(){m.onreadystatechange=c,m.abort(),a(null,"timeout",m,t)},t.timeout)),m.send(t.data?t.data:null),m)},$.get=function(e,t,n,i){return $.ajax(p.apply(null,arguments))},$.post=function(e,t,n,i){var r=p.apply(null,arguments);return r.type="POST",$.ajax(r)},$.getJSON=function(e,t,n){var i=p.apply(null,arguments);return i.dataType="json",$.ajax(i)},$.fn.load=function(e,t,n){if(!this.length)return this;var i=this,r=e.split(/\s/),o,a=p(e,t,n),s=a.success;return r.length>1&&(a.url=r[0],o=r[1]),a.success=function(e){i.html(o?$("<div>").html(e.replace(w,"")).find(o):e),s&&s.apply(i,arguments)},$.ajax(a),this};var S=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){this.push(S(e)+"="+S(t))},f(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function($){$.fn.serializeArray=function(){var e=[],t;return $(Array.prototype.slice.call(this.get(0).elements)).each(function(){t=$(this);var n=t.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&("radio"!=n&&"checkbox"!=n||this.checked)&&e.push({name:t.attr("name"),value:t.val()})}),e},$.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},$.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var t=$.Event("submit");this.eq(0).trigger(t),t.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function($,e){function t(e){return n(e.replace(/([a-z])([A-Z])/,"$1-$2"))}function n(e){return e.toLowerCase()}function i(e){return o?o+e:n(e)}var r="",o,a,s,c={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},u=window.document,l=u.createElement("div"),d=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,p,f,h,m,g,v,w,y={};$.each(c,function(t,i){return l.style[t+"TransitionProperty"]!==e?(r="-"+n(t)+"-",o=i,!1):void 0}),p=r+"transform",y[f=r+"transition-property"]=y[h=r+"transition-duration"]=y[m=r+"transition-timing-function"]=y[g=r+"animation-name"]=y[v=r+"animation-duration"]=y[w=r+"animation-timing-function"]="",$.fx={off:o===e&&l.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:r,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},$.fn.animate=function(e,t,n,i){return $.isPlainObject(t)&&(n=t.easing,i=t.complete,t=t.duration),t&&(t=("number"==typeof t?t:$.fx.speeds[t]||$.fx.speeds._default)/1e3),this.anim(e,t,n,i)},$.fn.anim=function(n,i,r,o){var a,s={},c,u="",l=this,b,x=$.fx.transitionEnd;if(i===e&&(i=.4),$.fx.off&&(i=0),"string"==typeof n)s[g]=n,s[v]=i+"s",s[w]=r||"linear",x=$.fx.animationEnd;else{c=[];for(a in n)d.test(a)?u+=a+"("+n[a]+") ":(s[a]=n[a],c.push(t(a)));u&&(s[p]=u,c.push(p)),i>0&&"object"==typeof n&&(s[f]=c.join(", "),s[h]=i+"s",s[m]=r||"linear")}return b=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;$(e.target).unbind(x,b)}$(this).css(y),o&&o.call(this)},i>0&&this.bind(x,b),this.size()&&this.get(0).clientLeft,this.css(s),0>=i&&setTimeout(function(){l.each(function(){b.call(this)})},0),this},l=null}(Zepto),function($){function e(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function t(){l=null,a.last&&(a.el.trigger("longTap"),a={})}function n(){l&&clearTimeout(l),l=null}function i(){s&&clearTimeout(s),c&&clearTimeout(c),u&&clearTimeout(u),l&&clearTimeout(l),s=c=u=l=null,a={}}function r(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function o(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var a={},s,c,u,l,d=750,p;$(document).ready(function(){var f,h,m=0,g=0,v,w;"MSGesture"in window&&(p=new MSGesture,p.target=document.body),$(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(a.el.trigger("swipe"),a.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(e){(!(w=o(e,"down"))||r(e))&&(v=w?e:e.touches[0],e.touches&&1===e.touches.length&&a.x2&&(a.x2=void 0,a.y2=void 0),f=Date.now(),h=f-(a.last||f),a.el=$("tagName"in v.target?v.target:v.target.parentNode),s&&clearTimeout(s),a.x1=v.pageX,a.y1=v.pageY,h>0&&250>=h&&(a.isDoubleTap=!0),a.last=f,l=setTimeout(t,d),p&&w&&p.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(!(w=o(e,"move"))||r(e))&&(v=w?e:e.touches[0],n(),a.x2=v.pageX,a.y2=v.pageY,m+=Math.abs(a.x1-a.x2),g+=Math.abs(a.y1-a.y2))}).on("touchend MSPointerUp pointerup",function(t){(!(w=o(t,"up"))||r(t))&&(n(),a.x2&&Math.abs(a.x1-a.x2)>30||a.y2&&Math.abs(a.y1-a.y2)>30?u=setTimeout(function(){a.el.trigger("swipe"),a.el.trigger("swipe"+e(a.x1,a.x2,a.y1,a.y2)),a={}},0):"last"in a&&(30>m&&30>g?c=setTimeout(function(){var e=$.Event("tap");e.cancelTouch=i,a.el.trigger(e),a.isDoubleTap?(a.el&&a.el.trigger("doubleTap"),a={}):s=setTimeout(function(){s=null,a.el&&a.el.trigger("singleTap"),a={}},250)},0):a={}),m=g=0)}).on("touchcancel MSPointerCancel pointercancel",i),$(window).on("scroll",i)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){$.fn[e]=function(t){return this.on(e,t)}})}(Zepto),function(){function e(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e){return!!e.exifdata}function i(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),i=n.length,r=new ArrayBuffer(i),o=new Uint8Array(r),a=0;i>a;a++)o[a]=n.charCodeAt(a);return r}function r(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){(200==this.status||0===this.status)&&t(this.response)},n.send()}function o(e,t){function n(n){var i=a(n),r=s(n);e.exifdata=i||{},e.iptcdata=r||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var o=i(e.src);n(o)}else if(/^blob\:/i.test(e.src)){var c=new FileReader;c.onload=function(e){n(e.target.result)},r(e.src,function(e){c.readAsArrayBuffer(e)})}else{var u=new XMLHttpRequest;u.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(u.response),u=null},u.open("GET",e.src,!0),u.responseType="arraybuffer",u.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var c=new FileReader;c.onload=function(e){f&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},c.readAsArrayBuffer(e)}}function a(e){var t=new DataView(e);if(f&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return f&&console.log("Not a valid JPEG"),!1;for(var n=2,i=e.byteLength,r;i>n;){if(255!=t.getUint8(n))return f&&console.log("Not a valid marker at offset "+n+", found: "+t.getUint8(n)),!1;if(r=t.getUint8(n+1),f&&console.log(r),225==r)return f&&console.log("Found 0xFFE1 marker"),p(t,n+4,t.getUint16(n+2)-2);n+=2+t.getUint16(n+2)}}function s(e){var t=new DataView(e);if(f&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return f&&console.log("Not a valid JPEG"),!1;for(var n=2,i=e.byteLength,r=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};i>n;){if(r(t,n)){var o=t.getUint8(n+7);o%2!==0&&(o+=1),0===o&&(o=4);var a=n+8+o,s=t.getUint16(n+6+o);return c(e,a,s);break}n++}}function c(e,t,n){for(var i=new DataView(e),r={},o,a,s,c,u,l=t;t+n>l;)28===i.getUint8(l)&&2===i.getUint8(l+1)&&(c=i.getUint8(l+2),c in b&&(s=i.getInt16(l+3),u=s+5,a=b[c],o=d(i,l+5,s),r.hasOwnProperty(a)?r[a]instanceof Array?r[a].push(o):r[a]=[r[a],o]:r[a]=o)),l++;return r}function u(e,t,n,i,r){var o=e.getUint16(n,!r),a={},s,c,u;for(u=0;o>u;u++)s=n+12*u+2,c=i[e.getUint16(s,!r)],!c&&f&&console.log("Unknown tag: "+e.getUint16(s,!r)),a[c]=l(e,s,t,n,r);return a}function l(e,t,n,i,r){var o=e.getUint16(t+2,!r),a=e.getUint32(t+4,!r),s=e.getUint32(t+8,!r)+n,c,u,l,p,f,h;switch(o){case 1:case 7:if(1==a)return e.getUint8(t+8,!r);for(c=a>4?s:t+8,u=[],p=0;a>p;p++)u[p]=e.getUint8(c+p);return u;case 2:return c=a>4?s:t+8,d(e,c,a-1);case 3:if(1==a)return e.getUint16(t+8,!r);for(c=a>2?s:t+8,u=[],p=0;a>p;p++)u[p]=e.getUint16(c+2*p,!r);return u;case 4:if(1==a)return e.getUint32(t+8,!r);for(u=[],p=0;a>p;p++)u[p]=e.getUint32(s+4*p,!r);return u;case 5:if(1==a)return f=e.getUint32(s,!r),h=e.getUint32(s+4,!r),l=new Number(f/h),l.numerator=f,l.denominator=h,l;for(u=[],p=0;a>p;p++)f=e.getUint32(s+8*p,!r),h=e.getUint32(s+4+8*p,!r),u[p]=new Number(f/h),u[p].numerator=f,u[p].denominator=h;return u;case 9:if(1==a)return e.getInt32(t+8,!r);for(u=[],p=0;a>p;p++)u[p]=e.getInt32(s+4*p,!r);return u;case 10:if(1==a)return e.getInt32(s,!r)/e.getInt32(s+4,!r);for(u=[],p=0;a>p;p++)u[p]=e.getInt32(s+8*p,!r)/e.getInt32(s+4+8*p,!r);return u}}function d(e,t,i){var r="";for(n=t;t+i>n;n++)r+=String.fromCharCode(e.getUint8(n));return r}function p(e,t){if("Exif"!=d(e,t,4))return f&&console.log("Not valid EXIF data! "+d(e,t,4)),!1;var n,i,r,o,a,s=t+6;if(18761==e.getUint16(s))n=!1;else{if(19789!=e.getUint16(s))return f&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(s+2,!n))return f&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var c=e.getUint32(s+4,!n);if(8>c)return f&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(s+4,!n)),!1;
if(i=u(e,s,s+c,v,n),i.ExifIFDPointer){o=u(e,s,s+i.ExifIFDPointer,g,n);for(r in o){switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[r]=y[r][o[r]];break;case"ExifVersion":case"FlashpixVersion":o[r]=String.fromCharCode(o[r][0],o[r][1],o[r][2],o[r][3]);break;case"ComponentsConfiguration":o[r]=y.Components[o[r][0]]+y.Components[o[r][1]]+y.Components[o[r][2]]+y.Components[o[r][3]]}i[r]=o[r]}}if(i.GPSInfoIFDPointer){a=u(e,s,s+i.GPSInfoIFDPointer,w,n);for(r in a){switch(r){case"GPSVersionID":a[r]=a[r][0]+"."+a[r][1]+"."+a[r][2]+"."+a[r][3]}i[r]=a[r]}}return i}var f=!1,h=this,m=function(e){return e instanceof m?e:this instanceof m?void(this.EXIFwrapped=e):new m(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports.EXIF=m):h.EXIF=m;var g=m.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},v=m.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},w=m.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},y=m.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},b={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};m.getData=function(e,n){return(e instanceof Image||e instanceof HTMLImageElement)&&!e.complete?!1:(t(e)?n&&n.call(e):o(e,n),!0)},m.getTag=function(e,n){return t(e)?e.exifdata[n]:void 0},m.getAllTags=function(e){if(!t(e))return{};var n,i=e.exifdata,r={};for(n in i)i.hasOwnProperty(n)&&(r[n]=i[n]);return r},m.pretty=function(e){if(!t(e))return"";var n,i=e.exifdata,r="";for(n in i)i.hasOwnProperty(n)&&(r+="object"==typeof i[n]?i[n]instanceof Number?n+" : "+i[n]+" ["+i[n].numerator+"/"+i[n].denominator+"]\r\n":n+" : ["+i[n].length+" values]\r\n":n+" : "+i[n]+"\r\n");return r},m.readFromBinaryFile=function(e){return a(e)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return m})}.call(this),!function(){"use strict";var e,t,n,i,r,o,a,s,c,u,l,d,p,f=function(e){for(var t,n=document.querySelectorAll(".slider-normal > .slide-normal-group");e&&e!==document;e=e.parentNode)for(t=n.length;t--;)if(n[t]===e)return e},h=function(e,t){for(var n,i=t?"left":"right",r=document.querySelectorAll(".slider-normal > .slide-normal-"+i);e&&e!==document;e=e.parentNode)for(n=r.length;n--;)if(r[n]===e)return e},m=function(){if("webkitTransform"in n.style){var e=n.style.webkitTransform.match(/translate3d\(([^,]*)/),t=e?e[1]:0;return parseInt(t,10)}},g=function(e){var t=e?0>i?"ceil":"floor":"round";l=Math[t](m()/(p/n.children.length)),l+=e,l=Math.min(l,0),l=Math.max(-(n.children.length-1),l)},v=function(o){if(n=f(o.target)){var l=n.querySelector(".slide-normal");p=l.offsetWidth*n.children.length,d=void 0,u=n.offsetWidth,c=1,a=-(n.children.length-1),s=+new Date,e=o.touches[0].pageX,t=o.touches[0].pageY,i=0,r=0,g(0),n.style["-webkit-transition-duration"]=0}},w=function(s){s.touches.length>1||!n||(i=s.touches[0].pageX-e,r=s.touches[0].pageY-t,e=s.touches[0].pageX,t=s.touches[0].pageY,"undefined"==typeof d&&(d=Math.abs(r)>Math.abs(i)),d||(o=i/c+m(),s.preventDefault(),c=0===l&&i>0?e/u+1.25:l===a&&0>i?Math.abs(e)/u+1.25:1,n.style.webkitTransform="translate3d("+o+"px,0,0)"))},y=function(e){n&&!d&&(g(+new Date-s<1e3&&Math.abs(i)>15?0>i?-1:1:0),o=l*u,n.style["-webkit-transition-duration"]=".2s",n.style.webkitTransform="translate3d("+o+"px,0,0)",selecttemp({detail:{slideNumber:Math.abs(l)},setSlideNumber:function(){l=this.slideNumber},target:n,bubbles:!0,cancelable:!0}))},b=function(e){var t=h(e.target,!1),i=h(e.target,!0);if(t||i){var r=t?t:i,s=t?!0:!1;n=r.parentNode.querySelector(".slide-normal-group"),u=n.offsetWidth,l="undefined"==typeof l?0:-Math.abs(parseInt(n.style.webkitTransform.replace("translate3d(","").replace("px, 0px, 0px)",""))/u),console.log(l),s?l++:l--;var c=n.querySelector(".slide-normal");p=c.offsetWidth*n.children.length,u=n.offsetWidth,a=-(n.children.length-1),l>0&&(l=0),a>l&&(l=a),o=l*u,n.style["-webkit-transition-duration"]=".2s",n.style.webkitTransform="translate3d("+o+"px,0,0)","undefined"!=typeof n.parentNode&&selecttemp({detail:{slideNumber:Math.abs(l)},setSlideNumber:function(){l=this.slideNumber},target:n,bubbles:!0,cancelable:!0})}};window.addEventListener("touchstart",v),window.addEventListener("touchmove",w),window.addEventListener("touchend",y),window.addEventListener("touchend",b)}(),function(){function e(e){var t=e.naturalWidth,n=e.naturalHeight;if(t*n>1048576){var i=document.createElement("canvas");i.width=i.height=1;var r=i.getContext("2d");return r.drawImage(e,-t+1,0),0===r.getImageData(0,0,1,1).data[3]}return!1}function t(e,t,n){var i=document.createElement("canvas");i.width=1,i.height=n;var r=i.getContext("2d");r.drawImage(e,0,0);for(var o=r.getImageData(0,0,1,n).data,a=0,s=n,c=n;c>a;){var u=o[4*(c-1)+3];0===u?s=c:a=c,c=s+a>>1}var l=c/n;return 0===l?1:l}function n(e,t,n){var r=document.createElement("canvas");return i(e,r,t,n),r.toDataURL("image/jpeg",t.quality||.8)}function i(n,i,o,a){var s=n.naturalWidth,c=n.naturalHeight;if(s+c){var u=o.width,l=o.height,d=i.getContext("2d");d.save(),r(i,d,u,l,o.orientation);var p=e(n);p&&(s/=2,c/=2);var f=1024,h=document.createElement("canvas");h.width=h.height=f;for(var m=h.getContext("2d"),g=a?t(n,s,c):1,v=Math.ceil(f*u/s),w=Math.ceil(f*l/c/g),y=0,b=0;c>y;){for(var x=0,_=0;s>x;)m.clearRect(0,0,f,f),m.drawImage(n,-x,-y),d.drawImage(h,0,0,f,f,_,b,v,w),x+=f,_+=v;y+=f,b+=w}d.restore(),h=m=null}}function r(e,t,n,i,r){switch(r){case 5:case 6:case 7:case 8:e.width=i,e.height=n;break;default:e.width=n,e.height=i}switch(r){case 2:t.translate(n,0),t.scale(-1,1);break;case 3:t.translate(n,i),t.rotate(Math.PI);break;case 4:t.translate(0,i),t.scale(1,-1);break;case 5:t.rotate(.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(.5*Math.PI),t.translate(0,-i);break;case 7:t.rotate(.5*Math.PI),t.translate(n,-i),t.scale(-1,1);break;case 8:t.rotate(-.5*Math.PI),t.translate(-n,0)}}function o(e){if(window.Blob&&e instanceof Blob){if(!a)throw Error("No createObjectURL function found to create blob url");var t=new Image;t.src=a.createObjectURL(e),this.blob=e,e=t}if(!e.naturalWidth&&!e.naturalHeight){var n=this;e.onload=e.onerror=function(){var e=n.imageLoadListeners;if(e){n.imageLoadListeners=null;for(var t=0,i=e.length;i>t;t++)e[t]()}},this.imageLoadListeners=[]}this.srcImage=e}var a=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;o.prototype.render=function(e,t,r){if(this.imageLoadListeners){var o=this;return void this.imageLoadListeners.push(function(){o.render(e,t,r)})}t=t||{};var s=this.srcImage.naturalWidth,c=this.srcImage.naturalHeight,u=t.width,l=t.height,d=t.maxWidth,p=t.maxHeight,f=!this.blob||"image/jpeg"===this.blob.type;u&&!l?l=c*u/s<<0:l&&!u?u=s*l/c<<0:(u=s,l=c),d&&u>d&&(u=d,l=c*u/s<<0),p&&l>p&&(l=p,u=s*l/c<<0);var h={width:u,height:l};for(var m in t)h[m]=t[m];var g=e.tagName.toLowerCase();"img"===g?e.src=n(this.srcImage,h,f):"canvas"===g&&i(this.srcImage,e,h,f),"function"==typeof this.onrender&&this.onrender(e),r&&r(),this.blob&&(this.blob=null,a.revokeObjectURL(this.srcImage.src))},"function"==typeof define&&define.amd?define([],function(){return o}):this.MegaPixImage=o}();var ANIMATION_END_NAME,ANIMATION_END_NAMES,BindShare,CreateCanvas,FirstPage,PageloadEnd,ResetStepBar,TRANSITION_END_NAME,TRANSITION_END_NAMES,VENDORS,beginload,bindWechatNote,canvas,checkAndroid,clipicon,css3Prefix,delayRun,fShare,handleComplete,handleFileLoad,i,iconcoEnd,inputDeclaration,inputIMGTEXT,lastTime,loadList,mTestElement,my,postajax,preload,processPageHide,putIMGto,putToCanvas,regajax,selecttemp,shareFriend,shareTimeline,shareTo,shareToPs,showNoteAlert,showWechat,showWechatNote,showpop,slide,stage,stepBar,stepPageShow,tempMap,tick,uploadFun,uploadINFO,uploadINFOafter,uploading,_Progress,_dom,_i,_ios7,_ios7putToCanvas,_len,_putIMGto,_temp,_touch,_uploading,_wechat,_wechat_bool,_wechat_f;for(my={},my.getid=function(e){return document.getElementById(e)},my.getclass=function(e){return document.getElementsByClassName(e)},my.getbyname=function(e){return document.getElementsByName(e)},my.createObjectURL=function(e){return window.navigator.userAgent.indexOf("Chrome")>=1||window.navigator.userAgent.indexOf("Safari")>=1?window.webkitURL.createObjectURL(e):window.URL.createObjectURL(e)},VENDORS=["Moz","webkit","ms","O"],TRANSITION_END_NAMES={Moz:"transitionend",webkit:"webkitTransitionEnd",ms:"MSTransitionEnd",O:"oTransitionEnd"},ANIMATION_END_NAMES={Moz:"animationend",webkit:"webkitAnimationEnd",ms:"MSAnimationEnd",O:"oAnimationEnd"},mTestElement=document.createElement("div"),_i=0,_len=VENDORS.length;_len>_i&&(i=VENDORS[_i],css3Prefix=i,!(css3Prefix+"Transition"in mTestElement.style));_i++)css3Prefix=!1;css3Prefix&&(TRANSITION_END_NAME=TRANSITION_END_NAMES[css3Prefix],ANIMATION_END_NAME=ANIMATION_END_NAMES[css3Prefix]),_touch={defaultMove:0,offset:{x:-1,y:-1},cnum:.001,scale:-1,dom:!1,x:0,y:0},_touch.star=function(e){var t;if(_touch.dom)return t=e.touches[0],_touch.x=_touch.dom.x,_touch.y=_touch.dom.y},_touch.move=function(e){var t,n,i,r,o,a;if(_touch.dom)return e.touches.length>1?(t=e.touches[0],n=e.touches[1],o=t.clientX-n.clientY,a=t.clientY-n.clientY,o=o>0?o:-o,a=a>0?a:-a,i=Math.sqrt(o*o+a*a),0===_touch.defaultMove&&(_touch.defaultMove=i),-1===_touch.scale&&(_touch.scale=_touch.dom.scaleX),r=(i-_touch.defaultMove)*_touch.cnum,_touch.dom.scaleX=_touch.dom.scaleY=_touch.scale+r):(t=e.touches[0],-1===_touch.offset.x&&-1===_touch.offset.y&&(_touch.offset.x=t.clientX,_touch.offset.y=t.clientY),o=t.clientX-_touch.offset.x,a=t.clientY-_touch.offset.y,_touch.dom.x=_touch.x+o,_touch.dom.y=_touch.y+a)},_touch.end=function(e){return _touch.dom?(_touch.defaultMove=0,_touch.offset.x=-1,_touch.offset.y=-1,_touch.scale=-1):void 0},_wechat_f={appid:"",img_url:"http://campaign.douban.com/files/campaign/casarte_NOCO/img/wechat-share.png",img_width:200,img_height:200,link:"http://campaign.douban.com/files/campaign/casarte_NOCO/default.html",desc:"速速加入卡萨帝NOCO燃气热水器隐患大搜捕，赢取Kindle Paperwhite！",title:"NOCO帮我消灭了CO隐患！"},_wechat={appid:"",img_url:"http://campaign.douban.com/files/campaign/casarte_NOCO/img/wechat-share.png",img_width:200,img_height:200,link:"http://campaign.douban.com/files/campaign/casarte_NOCO/default.html",desc:"嘘！我参加了卡萨帝燃气热水器代号NOCO有奖神秘任务！",title:"嘘！我参加了卡萨帝燃气热水器代号NOCO有奖神秘任务！"},_wechat_bool=!1,shareFriend=function(){return window.WeixinJSBridge?WeixinJSBridge.invoke("sendAppMessage",_wechat_f):void 0},shareTimeline=function(){return window.WeixinJSBridge?WeixinJSBridge.invoke("shareTimeline",_wechat):void 0},document.addEventListener("WeixinJSBridgeReady",function(){var e,t;return _wechat_bool=!0,WeixinJSBridge.on("menu:share:appmessage",function(e){return shareFriend()}),WeixinJSBridge.on("menu:share:timeline",function(e){return shareTimeline()}),t=navigator.userAgent.toLowerCase(),t.indexOf(!1)&&(e=Math.abs(navigator.userAgent.toLowerCase().split("android")[1].split(";")[0].replace(".","")),e=100>e?10*e:e,e>440)?bindWechatNote():void 0}),bindWechatNote=function(){return $("#uploadimg").remove(),$(".upload").on("touchend",function(e){return showWechatNote()})},shareToPs=function(e){var t;return t="http://campaign.douban.com/files/campaign/casarte_NOCO/default.html",e?(t="http://campaign.douban.com/files/campaign/casarte_NOCO/share.html#"+e,_wechat.link=_wechat_f.link=t,shareFriend(),shareTimeline()):void 0},preload={},loadList=[{id:"logo",src:"img/logo.png"},{id:"bg",src:"img/bg.jpg"},{id:"pro-1",src:"img/pro-1.png"},{id:"pro-2",src:"img/pro-2.png"},{id:"pro-3",src:"img/pro-3.png"},{id:"co",src:"img/co.png"},{id:"co2",src:"img/co2.png"},{id:"code",src:"img/code.png"},{id:"no",src:"img/no.png"},{id:"text-bg",src:"img/text-bg.png"},{id:"name-1",src:"img/text-gold.png"},{id:"name-2",src:"img/text-silver.png"},{id:"name-3",src:"img/text-white.png"},{id:"btn-bg",src:"img/btn-bg.png"},{id:"input-bg",src:"img/input-bg.png"},{id:"upload-bg",src:"img/upload-bg.png"},{id:"goodjob",src:"img/goodjob.png"},{id:"reg-info",src:"img/reg-info.png"},{id:"icon-wechat",src:"img/icon-wechat.png"},{id:"icon-weibo",src:"img/icon-weibo.png"},{id:"icon-qweibo",src:"img/icon-qweibo.png"},{id:"icon-douban",src:"img/icon-douban.png"},{id:"icon-qzone",src:"img/icon-qzone.png"},{id:"temp-1",src:"img/poster-1.jpg"},{id:"temp-1-m",src:"img/poster-1.png"},{id:"temp-2",src:"img/poster-2.jpg"},{id:"temp-2-m",src:"img/poster-2.png"},{id:"temp-3",src:"img/poster-3.jpg"},{id:"temp-3-m",src:"img/poster-3.png"},{id:"temp-4",src:"img/poster-4.jpg"},{id:"temp-4-m",src:"img/poster-4.png"},{id:"temp-5",src:"img/poster-5.jpg"},{id:"temp-5-m",src:"img/poster-5.png"},{id:"temp-6",src:"img/poster-6.jpg"},{id:"temp-6-m",src:"img/poster-6.png"}],tempMap=[{first:{x:150,y:240,color:"#000000",text:"拒绝"},second:{x:150,y:288,color:"#000000",text:"牵手"}},{first:{x:170,y:238,color:"#ffffff",text:"远离"},second:{x:170,y:286,color:"#ffffff",text:"关爱"}},{first:{x:124,y:252,color:"#ffffff",text:"拒绝"},second:{x:124,y:296,color:"#ffffff",text:"牵手"}},{first:{x:156,y:51,color:"#1d5065",text:"远离"},second:{x:156,y:92,color:"#1d5065",text:"关爱"}},{first:{x:150,y:134,color:"#ffffff",text:"远离"},second:{x:150,y:184,color:"#ffffff",text:"关爱"}},{first:{x:150,y:355,color:"#545454",text:"远离"},second:{x:150,y:405,color:"#545454",text:"关爱"}}],_Progress=0,clipicon=null,uploading=!1,beginload=function(){return preload=new createjs.LoadQueue,preload.on("fileload",handleFileLoad,this),preload.on("complete",handleComplete,this),preload.loadManifest(loadList)},handleFileLoad=function(){var e;return _Progress++,e=Math.ceil(_Progress/loadList.length*100),$("#loadnum").text(e+"%")},_ios7=!1,handleComplete=function(){var e,t,n,i,r;for(navigator.userAgent.toLowerCase().indexOf("iphone")>-1&&(n=Math.abs(navigator.userAgent.toLowerCase().split("iphone os ")[1].split(" ")[0].replace(/_/gi,"")),100>n&&(n=10*n),800>n&&(_ios7=!0)),i=0,r=loadList.length;r>i;i++)t=loadList[i],$("[data-img="+t.id+"]").append('<img src="'+t.src+'" />'),$("[data-bg="+t.id+"]").css({"background-image":"url("+t.src+")"});return shareTo(),$("body").css({background:"url(img/bg.jpg) no-repeat center center","background-size":"cover"}),$(".logo").css({background:"url(img/logo.png) no-repeat top left","background-size":"contain"}),$(".ProD").css({background:"url(img/pro-1.png) no-repeat center center","background-size":"contain"}),e=$(".page-loading .icon-co"),clipicon=e.clone(),clipicon.css({position:"absolute","z-index":5001,top:e.offset().top+"px",left:e.offset().left+"px"}),$("body").append(clipicon),$(".page-loading").on(ANIMATION_END_NAME,PageloadEnd),$(".text-note").on("swipeUp",function(e){return $(".page-process").addClass("moveUp"),stepPageShow(),_hmt.push(["_trackEvent","home","select","temp"])}),$(".text-note").on("touchmove",function(e){return e.preventDefault()}),$(".page-process .star").on(TRANSITION_END_NAME,processPageHide),setTimeout(function(){return $(".page-loading").addClass("out")},1e3),$("#mySlider").slider({loop:!0,autoPlay:!1,showDot:!1,slide:function(e,t){return $("#mySlider-name .name-list span").hide(),$("#mySlider-name .name-list span").eq(t).show()}}),$(".page-share").show(),$("#mySlider2").slider({loop:!0,autoPlay:!1,showDot:!1,slide:function(e,t){return $("#mySlider2-name .name-list span").hide(),$("#mySlider2-name .name-list span").eq(t).show()}}),$(".page-share").hide(),$("#mySlider a,#mySlider2 a").on("click",function(e){var t;return t=$(this).attr("href").replace("#",""),showpop(t),_hmt.push(["_trackEvent","home","selectProduct",t])}),$(".page-share .pro-show").on("touchend",showpop),$(".wechat-share").on("touchend",showWechat),$(".select-temp").on("touchend",inputDeclaration),$(".select-img").on("touchend",inputIMGTEXT),$(".reset").on("touchend",ResetStepBar),$(".uploadbtn").on("touchend",uploadFun),$(".submit").on("touchend",uploadINFO),CreateCanvas()},canvas=null,stage=null,_temp=0,_dom={},CreateCanvas=function(){return canvas=my.getid("ps"),stage=new createjs.Stage(canvas),createjs.Touch.enable(stage),createjs.Ticker.setFPS(30),canvas.addEventListener("touchstart",_touch.star),canvas.addEventListener("touchmove",_touch.move),canvas.addEventListener("touchend",_touch.end)},PageloadEnd=function(e){return $(".page-loading").hide(),clipicon.on(TRANSITION_END_NAME,iconcoEnd),clipicon.css({top:$(".page-init .icon-co").offset().top,left:clipicon.offset().left+1}),checkAndroid()},iconcoEnd=function(){var e,t;return null==clipicon?!1:(e=$(".page-init .icon-co"),e.css({opacity:1}),$(".ProD").css({opacity:1}),$(".page-init p").show(),$(".page-init .note-warring").show(),t=20,$(".ProD").height()/$(".ProD").width()>5&&(t=40),$(".page-init span.note").css({top:clipicon.offset().top-t}).show(),$(".swipeBox").on("swipeUp",function(){return $(".page-init .note-warring").hide(),$(".page-init .note").hide(),e.addClass("toco2"),setTimeout(function(){return e.addClass("toco2img")},500),_hmt.push(["_trackEvent","home","cotoco2","swipeUp"])}),$(".swipeBox").on("touchmove",function(e){return e.preventDefault()}),e.on(ANIMATION_END_NAME,FirstPage),clipicon.remove(),clipicon=null)},FirstPage=function(){return $(".page-init .note-success").show(),setTimeout(function(){return $(".page-init").on(TRANSITION_END_NAME,function(e){return $(".page-init").hide()}),$(".page-init").addClass("fadeOutBig"),$(".page-process").on(TRANSITION_END_NAME,function(e){return $("#icon-no").addClass("stamp")}),$(".page-process").addClass("on"),$("#text1").text(tempMap[0].first.text),$("#text2").text(tempMap[0].second.text)},800)},lastTime=0,slide=function(e){return $(".name-list span").hide(),$(".name-list span").eq(e.detail.slideNumber).show(),0===e.detail.slideNumber&&0===lastTime&&($(".slide-group",e.target).css({"transition-duration":"0s","-webkit-transition-duration":"0s","-webkit-transform":"translate3d(-"+2*$(".slide-group",e.target).width()+"px, 0px, 0px)"}),$(".name-list span").hide(),$(".name-list span").eq(2).show()),e.detail.slideNumber>2&&$(".slide-group",e.target).css({"transition-duration":"0s","-webkit-transition-duration":"0s","-webkit-transform":"translate3d(-"+$(".slide-group",e.target).width()*(e.detail.slideNumber-3)+"px, 0px, 0px)"}),void(lastTime=e.detail.slideNumber);return $("#mySlider .slide-left").show(),$("#mySlider .slide-right").show(),0===e.detail.slideNumber&&$("#mySlider .slide-right").hide(),e.detail.slideNumber===$("#mySlider .slide").length-1?$("#mySlider .slide-left").hide():void 0},stepPageShow=function(){return $(".page-step")},processPageHide=function(e){return $(".page-process").attr("class").indexOf("moveUp")<0?void 0:($(".page-process").hide(),$(".page-step").show(),setTimeout(function(){return $(".page-step").addClass("on"),$(".step-1").removeClass("none")}))},selecttemp=function(e){return $("#selecttemp .slide-normal").removeClass("on"),$("#selecttemp .slide-normal").eq(e.detail.slideNumber).addClass("on"),$(".select-temp").attr("rel",e.detail.slideNumber),$("#text1").text(tempMap[e.detail.slideNumber].first.text),$("#text2").text(tempMap[e.detail.slideNumber].second.text)},inputDeclaration=function(e){var t,n;return n=parseInt($("#selecttemp .on").index()),_temp=n,_dom.mark=$("#selecttemp .on").data("img"),t=new createjs.Bitmap(preload.getResult(_dom.mark)),stage.removeAllChildren(),stage.addChild(t),stage.update(),stepBar(0),$(".step-1").on(ANIMATION_END_NAME,function(){return $(".step-1").addClass("over"),$(".step-2").removeClass("none fadeOut").addClass("fadeIn")}),$(".step-1").addClass("fadeOut"),my.getid("uploadimg").addEventListener("change",function(e){var t;return t=this.files,t.length>0?putToCanvas(t[0]):void 0}),_hmt.push(["_trackEvent","home","selectTemplate","Template"])},_uploading=!1,inputIMGTEXT=function(e){var t,n;return t=$("[name=first]").val(),n=$("[name=second]").val(),t.length<=0?alert('请输入"'+$("[name=first]").prev().text()+'"的内容.'):n.length<=0?alert('请输入"'+$("[name=second]").prev().text()+'"的内容.'):uploading?showNoteAlert("waiting"):(stepBar(1),$(".step-2").on(ANIMATION_END_NAME,function(){return $(".step-2").removeClass("fadeIn fadeOut").addClass("over"),$(".step-3").removeClass("none").addClass("fadeIn"),$(".step-2").off(ANIMATION_END_NAME)}),$(".step-2").removeClass("fadeIn").addClass("fadeOut"),_dom.first=new createjs.Text(t,"normal 30px Helvetica",tempMap[_temp].first.color),_dom.first.maxWidth=360,_dom.first.lineHeight=46,_dom.first.textAlign="left",_dom.first.x=tempMap[_temp].first.x,_dom.first.y=tempMap[_temp].first.y,_dom.second=new createjs.Text(n,"normal 30px Helvetica",tempMap[_temp].second.color),_dom.second.maxWidth=360,_dom.second.lineHeight=46,_dom.second.textAlign="left",_dom.second.x=tempMap[_temp].second.x,_dom.second.y=tempMap[_temp].second.y,stage.addChild(_dom.first,_dom.second),stage.update(),_hmt.push(["_trackEvent","home","inputText","uploadimg"]))},uploadFun=function(){var e;return e=canvas.toDataURL("image/png"),postajax(e),$(".step-3").on(ANIMATION_END_NAME,function(){return $(".step-3").removeClass("fadeIn fadeOut").addClass("over"),$(".step-4").removeClass("none").addClass("fadeIn"),$(".step-3").off(ANIMATION_END_NAME)}),$(".step-3").removeClass("fadeIn").addClass("fadeOut"),stepBar(2),_hmt.push(["_trackEvent","home","uploadWork","work"])},uploadINFO=function(){return $("[name=username]").val().length<=0?alert("姓名不能为空!"):/^1[3-8]\d{9}$/g.test($("[name=mobile]").val())?(regajax({username:$("[name=username]").val(),mobile:$("[name=mobile]").val()}),_hmt.push(["_trackEvent","home","uploadInfo","username-and-phonenumber"])):alert("手机号码必须是11位数字!")},uploadINFOafter=function(){return $(".step-4").on(ANIMATION_END_NAME,function(){return $(".step-4").removeClass("fadeIn fadeOut").addClass("over"),$(".step-4").off(ANIMATION_END_NAME),$(".page-step").removeClass("on"),$(".page-step").on(ANIMATION_END_NAME,function(e){return $(".page-share").show().addClass("fadeIn"),$(".page-step").hide().off(ANIMATION_END_NAME)})}),$(".step-4").removeClass("fadeIn").addClass("fadeOut"),stepBar(3)},delayRun=null,putToCanvas=function(e){var t,n;return uploading=!0,n=my.createObjectURL(e),_ios7?_ios7putToCanvas(e):(delayRun=setTimeout(function(){return $(".step-2.over").length<=0?putIMGto(t,!1):void 0},4e3),t=new Image,t.onload=function(){return EXIF.getData(t,function(){var e;if(e=EXIF.getTag(t,"Orientation"),null!=e&&6===e){if(null!=delayRun)return putIMGto(t,!0)}else if(null!=delayRun)return putIMGto(t,!1)})},t.onerror=function(){return alert("抱歉,权限不足无法使用相册或相机照片.")},t.src=n)},_ios7putToCanvas=function(e){var t,n;return n=new MegaPixImage(e),t=document.createElement("canvas"),n.render(t,{maxWidth:360,maxHeight:450},function(){var e,n;return n=t.toDataURL("image/png"),e=new Image,e.onload=function(){return putIMGto(e,!1)},e.src=n})},_putIMGto=!1,putIMGto=function(e,t){var n,i,r;return clearTimeout(delayRun),_putIMGto?"":(createjs.Ticker.removeEventListener("tick",tick),createjs.Ticker.addEventListener("tick",tick),_putIMGto=!0,uploading=!1,delayRun=null,r=360/e.width,n=new createjs.Bitmap(e),i=new createjs.Bitmap(preload.getResult(_dom.mark+"-m")),t&&(r=360/e.height,n.rotation=90,n.regY=e.height),debug||(n.scaleX=n.scaleY=r),stage.removeAllChildren(),stage.addChild(n,i),stage.update(),_touch.dom=n)},stepBar=function(e){return $(".step-bar .item").eq(e).addClass("over"),$(".step-bar .item").eq(e+1).addClass("on")},ResetStepBar=function(){return $(".step-bar .item").removeClass("on over"),$(".step-bar .item").eq(0).addClass("on"),$(".step-1,.step-2,.step-3,.step-4").removeClass("fadeIn fadeOut over").addClass("none"),$(".step-1").removeClass("none"),document.uploadimgform.reset(),_uploading=!1,uploading=!1,_putIMGto=!1,_hmt.push(["_trackEvent","home","ResetStep","gotoStepOne"])},showpop=function(){var e,t,n,r,o,a,s,c,u;for($(".pop").remove(),r=$("<div>").addClass("pop"),r.append("<img src='img/pop.png' />"),e=$("<div>").addClass("close"),r.append(e),u=$("<div>"),i=1,c=["http://www.casarte.cn/wap.php?mod=goods&goods_id=159","http://www.casarte.cn/wap.php?mod=goods&goods_id=183","http://www.casarte.cn/wap.php?mod=goods&goods_id=182"],o=0,a=c.length;a>o;o++)t=c[o],u.append('<div><a href="'+t+'" target="_blank"><img lazyload="img/pro-'+i+'.png" /></a></div>'),i++;return r.append(u),n=$("<div>").addClass("pro-name"),s=$("<div>").addClass("name-list"),s.append("<span class='gold'><img src='img/text-gold.png'></span>"),s.append("<span class='silver'><img src='img/text-silver.png'></span>"),s.append("<span class='white'><img src='img/text-white.png'></span>"),n.append(s),r.append(n),$("body").append(r),u.slider({loop:!0,autoPlay:!1,showDot:!1,slide:function(e,t){return $(".name-list span",r).hide(),$(".name-list span",r).eq(t).show()}}),e.on("touchend",function(e){return r.remove()})},showWechat=function(){var e;return $(".wechat").remove(),e=$("<div>").addClass("wechat"),$("body").append(e),e.on("touchend",function(t){return e.remove()}),_hmt.push(["_trackEvent","home","share","weixin"])},showNoteAlert=function(e){var t;return $("."+e).remove(),t=$("<div>").addClass(e),$("body").append(t),t.on("touchend",function(e){return t.remove()}),_hmt.push(["_trackEvent","home","error",e])},showWechatNote=function(){var e;return $(".wechat-note").remove(),e=$("<div>").addClass("wechat-note"),$("body").append(e),e.on("touchend",function(t){return e.remove()}),_hmt.push(["_trackEvent","home","error","android4.4,cannt upload."])},checkAndroid=function(){var e,t;return t=navigator.userAgent.toLowerCase(),t.indexOf(!1)&&_wechat_bool&&(e=Math.abs(navigator.userAgent.toLowerCase().split("android")[1].split(";")[0].replace(".","")),e=100>e?10*e:e,e>440)?showNoteAlert("android-note"):void 0},tick=function(e){return stage.update()},$(document).ready(function(){return window.scrollTo(0,1),$(".page-loading .content").on(ANIMATION_END_NAME,function(e){return beginload()})}),postajax=function(e){var t;return t=new Date,$.ajax({type:"post",dataType:"json",url:"http://battlepit.douban.com/custom/casarte_NOCO/upload",data:[{name:"image",value:e}],success:function(e){return shareTo(e.src),window.parent&&window.parent.shareToPs?window.parent.shareToPs(e.src):void 0},error:function(e){}})},regajax=function(e){var t,n;t=new collClient("http://campaign.douban.com","casarte_NOCO","casarte_NOCO_info","17dffd1a73b011e4b337"),n=JSON.stringify(e),t.post(n,function(e){return uploadINFOafter()})},shareTo=function(e){var t,n;return t="安全大搜捕-代号NOCO",n="http://campaign.douban.com/files/campaign/casarte_NOCO/default.html",BindShare(t,n,"http://campaign.douban.com/files/campaign/casarte_NOCO/img/pro-1.png"),e?(n="http://campaign.douban.com/files/campaign/casarte_NOCO/share.html#"+e,BindShare(t,n,e),_wechat.link=_wechat_f.link=n,shareFriend(),shareTimeline()):void 0
},BindShare=function(e,t,n){var i;return null==t&&(t=window.location.href),i={qweibo:"http://v.t.qq.com/share/share.php?title={title}&url={url}&pic={pic}",renren:"http://share.renren.com/share/buttonshare.do?title={title}&link={url}&pic={pic}",weibo:"http://v.t.sina.com.cn/share/share.php?title={title}&url={url}&pic={pic}",qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}&title={title}&pic={pic}",facebook:"http://www.facebook.com/sharer/sharer.php?s=100&p[url]={url}}&p[title]={title}&p[summary]={title}&pic={pic}",twitter:"https://twitter.com/intent/tweet?text={title}&pic={pic}",kaixin:"http://www.kaixin001.com/rest/records.php?content={title}&url={url}&pic={pic}",douban:"http://www.douban.com/share/service?bm=&image={pic}&href={url}&updated=&name={title}"},$("a[data-share]").each(function(r){return $(this).attr("href",fShare(i[$(this).data("share")],e,t,n))}),$("a[data-share]").click(function(e){return _hmt.push(["_trackEvent","home","share",$(this).data("share")])})},fShare=function(e,t,n,i){var r,o;return null==i&&(i=""),t=t,o=encodeURIComponent(t),i=encodeURIComponent(i),e=e.replace("{title}",o),e=e.replace("{pic}",i),r=encodeURIComponent(n),e=e.replace("{url}",r)};